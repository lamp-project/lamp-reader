(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{606:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWJvb2siIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjZmZmIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0zIDE5YTkgOSAwIDAgMSA5IDBhOSA5IDAgMCAxIDkgMCIgLz4KICA8cGF0aCBkPSJNMyA2YTkgOSAwIDAgMSA5IDBhOSA5IDAgMCAxIDkgMCIgLz4KICA8bGluZSB4MT0iMyIgeTE9IjYiIHgyPSIzIiB5Mj0iMTkiIC8+CiAgPGxpbmUgeDE9IjEyIiB5MT0iNiIgeDI9IjEyIiB5Mj0iMTkiIC8+CiAgPGxpbmUgeDE9IjIxIiB5MT0iNiIgeDI9IjIxIiB5Mj0iMTkiIC8+Cjwvc3ZnPg=="},619:function(e,t,n){"use strict";n.r(t);var r=n(60),o=(n(13),n(116),n(25)),l=1,v=65535,c=setInterval((function(){l=l+1&v}),250);c.unref&&c.unref();class d{constructor(e,t=1e3){var n,r,o,c,d;this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=(n=this.speed||5e3,r=4*(n||5),o=[0],c=1,d=l-1&v,function(e){var t=l-d&v;for(t>r&&(t=r),d=l;t--;)c===r&&(c=0),o[c]=o[0===c?r-1:c-1],c++;e&&(o[c-1]+=e);var n=o[c-1],_=o.length<r?0:o[c===r?0:c];return o.length<4?n:4*(n-_)/o.length}),this.initial=!1,this.emitDelay=t,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,t){const n=e.length;if(this.transferred+=n,this.speed=this.streamSpeed(n),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const progress={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(progress.remaining=this.getRemainingBytes(),progress.percentage=this.percentage),t(progress)}}}var _=function({defaultSize:e=0,emitDelay:t=10,onProgress:n=(()=>null),onComplete:r=(()=>null),onError:o=(()=>null)}){return function(l){if("undefined"==typeof Response||"undefined"==typeof ReadableStream)return l;const{body:body,headers:v,status:c}=l,_=v.get("content-length")||e,progress=new d(_,t),h=body.getReader(),I=new ReadableStream({start(e){!function t(){h.read().then((({done:o,value:l})=>{if(o)return r({}),void e.close();l&&progress.flow(l,n),e.enqueue(l),t()})).catch((e=>{o(e)}))}()}});return new Response(I,{headers:v,status:c})}},h=n(218),I=o.default.extend({asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=e.query,t.next=3,h.library.getInfo(r.id);case 3:return o=t.sent,t.t0=o?"exists":"initial",t.next=7,n.dispatch("book/getBook",+r.id);case 7:return t.t1=t.sent,t.abrupt("return",{state:t.t0,book:t.t1});case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{progress:0}},methods:{download:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state="downloading",t.next=3,fetch(e.book.file).then(_({onProgress:function(progress){e.progress=progress.percentage}})).then((function(e){return e.arrayBuffer()}));case 3:return n=t.sent,e.state="downloaded",t.next=7,h.library.addFromArrayBuffer(n,e.book.id);case 7:e.state="exists";case 8:case"end":return t.stop()}}),t)})))()},doAction:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.state,t.next="initial"===t.t0?3:"exists"===t.t0?6:8;break;case 3:return t.next=5,e.download();case 5:case 8:return t.abrupt("break",9);case 6:return e.$router.push("/reader/".concat(e.book.id)),t.abrupt("break",9);case 9:case"end":return t.stop()}}),t)})))()}}}),f=n(93),component=Object(f.a)(I,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",[r("h1",[e._v(e._s(e.book.title))]),e._v(" "),r("hr"),e._v(" "),r("section",[r("b-row",[r("b-col",{attrs:{lg:"3",sm:"12"}},[r("b-img",{attrs:{rounded:"",thumbnail:"",src:e.book.cover.medium,alt:e.book.title}})],1),e._v(" "),r("b-col",[r("b-button",{attrs:{size:"md",variant:"success",disabled:!["initial","exists"].includes(e.state)},on:{click:e.doAction}},[r("img",{attrs:{src:n(606),height:"24",alt:"library"}}),e._v(" "),"initial"==e.state?r("span",[e._v("Add To Libraray")]):"downloading"==e.state?r("span",[e._v(e._s(e.progress)+" %")]):"downloaded"==e.state?r("span",[e._v("Adding To Libraray")]):"exists"==e.state?r("span",[e._v("Read It")]):e._e()]),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("p",[r("strong",[e._v("Highest Word Rank:")]),e._v(" "),r("kbd",[e._v(e._s(e.book.HWR))])]),e._v(" "),r("p",[r("strong",[e._v("Unique Words Count:")]),e._v(" "),r("kbd",[e._v(e._s(e.book.UWC))])])],1)],1)],1),e._v(" "),r("br"),e._v(" "),r("section",[r("h2",[e._v("Authors")]),e._v(" "),r("hr"),e._v(" "),r("ul",e._l(e.book.persons,(function(t,i){var n=t.person;return r("li",{key:i},[e._v("\n        "+e._s(n.name)+"\n      ")])})),0)]),e._v(" "),r("br"),e._v(" "),r("section",[r("h2",[e._v("Subjects")]),e._v(" "),r("hr"),e._v(" "),r("ul",e._l(e.book.subjects,(function(t,i){return r("li",{key:i},[e._v("\n        "+e._s(t.title)+"\n      ")])})),0)]),e._v(" "),r("br"),e._v(" "),r("section",[r("h2",[e._v("Readablility")]),e._v(" "),r("hr"),e._v(" "),r("ul",[r("li",[r("strong",[e._v("A1:")]),e._v(" "+e._s(e.book.level.A1.readability.toFixed())+"%")]),e._v(" "),r("li",[r("strong",[e._v("A2:")]),e._v(" "+e._s(e.book.level.A2.readability.toFixed())+"%")]),e._v(" "),r("li",[r("strong",[e._v("B1:")]),e._v(" "+e._s(e.book.level.B1.readability.toFixed())+"%")]),e._v(" "),r("li",[r("strong",[e._v("B2:")]),e._v(" "+e._s(e.book.level.B2.readability.toFixed())+"%")]),e._v(" "),r("li",[r("strong",[e._v("C1:")]),e._v(" "+e._s(e.book.level.C1.readability.toFixed())+"%")]),e._v(" "),r("li",[r("strong",[e._v("C2:")]),e._v(" "+e._s(e.book.level.C2.readability.toFixed())+"%")])])]),e._v(" "),r("br"),e._v(" "),r("section",[r("h2",[e._v("Words Count")]),e._v(" "),r("hr"),e._v(" "),r("ul",[r("li",[r("strong",[e._v("A1:")]),e._v(" "+e._s(e.book.level.A1.count))]),e._v(" "),r("li",[r("strong",[e._v("A2:")]),e._v(" "+e._s(e.book.level.A2.count))]),e._v(" "),r("li",[r("strong",[e._v("B1:")]),e._v(" "+e._s(e.book.level.B1.count))]),e._v(" "),r("li",[r("strong",[e._v("B2:")]),e._v(" "+e._s(e.book.level.B2.count))]),e._v(" "),r("li",[r("strong",[e._v("C1:")]),e._v(" "+e._s(e.book.level.C1.count))]),e._v(" "),r("li",[r("strong",[e._v("C2:")]),e._v(" "+e._s(e.book.level.C2.count))])])])])}),[],!1,null,null,null);t.default=component.exports}}]);